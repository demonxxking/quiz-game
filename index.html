<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bharat Quiz Challenge</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            width: 90%;
            max-width: 650px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        h1 {
            color: #f4d03f;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .question-box {
            font-size: 1.4rem;
            margin: 1.5rem 0;
            min-height: 4rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 2rem 0;
        }
        .option-btn {
            padding: 0.8rem;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: transparent;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option-btn:hover {
            background: #3498db;
            transform: scale(1.02);
        }
        .score-display {
            font-size: 1.3rem;
            color: #2ecc71;
            text-align: center;
            margin: 1rem 0;
        }
        .feedback {
            height: 1.5rem;
            text-align: center;
            font-weight: bold;
            margin: 1rem 0;
        }
        .correct {
            color: #2ecc71;
        }
        .incorrect {
            color: #e74c3c;
        }
        .category-tag {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: #9b59b6;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }
        .timer-container {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }
        .timer-bar {
            height: 100%;
            background: #f4d03f;
            width: 100%;
            transition: width 1s linear;
        }
        .timer-text {
            text-align: center;
            font-weight: bold;
            margin-top: 0.5rem;
        }
        .question-counter {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #bdc3c7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🇮🇳 Bharat Quiz Challenge</h1>
        <div class="question-counter">Question: <span id="question-count">1</span>/∞</div>
        <div class="score-display">Score: <span id="score">0</span></div>
        <div class="timer-container">
            <div class="timer-bar" id="timer-bar"></div>
        </div>
        <div class="timer-text" id="timer-text">30s</div>
        <div class="question-box" id="question"></div>
        <div class="options-container" id="options"></div>
        <div class="feedback" id="feedback"></div>
    </div>

    <script>
        class QuizEngine {
            constructor() {
                this.usedQuestions = new Set();
                this.categories = {
                    math: this.generateMathQuestion,
                    physics: this.generatePhysicsQuestion,
                    chemistry: this.generateChemistryQuestion,
                    history: this.generateHistoryQuestion,
                    culture: this.generateCultureQuestion
                };
            }

            // ===== QUESTION GENERATORS =====
            generateMathQuestion(difficulty) {
                let num1, num2, op;
                if (difficulty < 5) {
                    num1 = Math.floor(Math.random() * 15) + 1;
                    num2 = Math.floor(Math.random() * 15) + 1;
                    op = ['+', '-'][Math.floor(Math.random() * 2)];
                } else if (difficulty < 10) {
                    num1 = Math.floor(Math.random() * 30) + 1;
                    num2 = Math.floor(Math.random() * 30) + 1;
                    op = ['+', '-', '*'][Math.floor(Math.random() * 3)];
                } else {
                    num1 = Math.floor(Math.random() * 50) + 1;
                    num2 = Math.floor(Math.random() * 50) + 1;
                    op = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
                }

                let question, answer;
                switch(op) {
                    case '+': 
                        question = `${num1} + ${num2}`; 
                        answer = num1 + num2; 
                        break;
                    case '-': 
                        question = `${num1} - ${num2}`; 
                        answer = num1 - num2; 
                        break;
                    case '*': 
                        question = `${num1} × ${num2}`; 
                        answer = num1 * num2; 
                        break;
                    case '/':
                        answer = Math.floor(Math.random() * 10) + 1;
                        num2 = Math.floor(Math.random() * 10) + 1;
                        num1 = answer * num2;
                        question = `${num1} ÷ ${num2}`;
                        break;
                }

                return this.formatQuestion(
                    `What is ${question}?`,
                    answer,
                    ['math', 'Math']
                );
            }

            generatePhysicsQuestion(difficulty) {
                const questions = [
                    { q: "What is the unit of force?", a: "Newton", opts: ["Joule", "Newton", "Watt", "Pascal"] },
                    { q: "Which law states 'For every action there is an equal and opposite reaction'?", 
                      a: "Newton's Third Law", opts: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Law of Gravitation"] },
                    { q: "What is the speed of light in vacuum?", 
                      a: "3 × 10⁸ m/s", opts: ["3 × 10⁵ m/s", "3 × 10⁸ m/s", "3 × 10¹⁰ m/s", "3 × 10³ m/s"] },
                    { q: "Which device converts mechanical energy to electrical energy?", 
                      a: "Generator", opts: ["Motor", "Transformer", "Generator", "Rectifier"] }
                ];
                return this.pickQuestion(questions, ['physics', 'Physics']);
            }

            generateChemistryQuestion(difficulty) {
                const questions = [
                    { q: "What is the chemical symbol for Gold?", a: "Au", opts: ["Ag", "Au", "Gd", "Go"] },
                    { q: "What is the pH value of pure water?", a: "7", opts: ["5", "6", "7", "8"] },
                    { q: "Which gas is most abundant in Earth's atmosphere?", 
                      a: "Nitrogen", opts: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"] },
                    { q: "What is the main component of vinegar?", 
                      a: "Acetic Acid", opts: ["Citric Acid", "Hydrochloric Acid", "Acetic Acid", "Sulfuric Acid"] }
                ];
                return this.pickQuestion(questions, ['chemistry', 'Chemistry']);
            }

            generateHistoryQuestion(difficulty) {
                const questions = [
                    { q: "Who was the first Prime Minister of India?", 
                      a: "Jawaharlal Nehru", opts: ["Mahatma Gandhi", "Jawaharlal Nehru", "Indira Gandhi", "Sardar Patel"] },
                    { q: "In which year did India gain independence?", 
                      a: "1947", opts: ["1945", "1947", "1950", "1935"] },
                    { q: "Where did Mahatma Gandhi launch the Civil Disobedience Movement?", 
                      a: "Dandi", opts: ["Dandi", "Champaran", "Bardoli", "Ahmedabad"] },
                    { q: "Who built the Taj Mahal?", 
                      a: "Shah Jahan", opts: ["Akbar", "Shah Jahan", "Aurangzeb", "Jahangir"] }
                ];
                return this.pickQuestion(questions, ['history', 'Indian History']);
            }

            generateCultureQuestion(difficulty) {
                const questions = [
                    { q: "Which classical dance form originated in Kerala?", 
                      a: "Kathakali", opts: ["Bharatanatyam", "Kathak", "Kathakali", "Odissi"] },
                    { q: "Which festival is known as the 'Festival of Lights'?", 
                      a: "Diwali", opts: ["Holi", "Diwali", "Dussehra", "Navratri"] },
                    { q: "Which Indian epic narrates the story of Lord Rama?", 
                      a: "Ramayana", opts: ["Mahabharata", "Ramayana", "Bhagavad Gita", "Vedas"] },
                    { q: "Which city is famous for the Sun Temple?", 
                      a: "Konark", opts: ["Khajuraho", "Konark", "Madurai", "Varanasi"] }
                ];
                return this.pickQuestion(questions, ['culture', 'Indian Culture']);
            }

            // ===== HELPER METHODS =====
            pickQuestion(questions, [category, displayName]) {
                const q = questions[Math.floor(Math.random() * questions.length)];
                return this.formatQuestion(q.q, q.a, [category, displayName], q.opts);
            }

            formatQuestion(question, answer, [category, displayName], customOptions) {
                const options = customOptions || this.generateOptions(answer);
                
                return {
                    question: question + ` <span class="category-tag">${displayName}</span>`,
                    options: options.sort(() => Math.random() - 0.5),
                    answer: answer,
                    category: category
                };
            }

            generateOptions(correctAnswer) {
                const options = [correctAnswer];
                while (options.length < 4) {
                    let randomOption;
                    if (typeof correctAnswer === 'number') {
                        randomOption = correctAnswer + Math.floor(Math.random() * 10) - 5;
                        if (randomOption < 1) randomOption = 1;
                    } else {
                        randomOption = "Option " + (options.length + 1);
                    }
                    if (!options.includes(randomOption)) options.push(randomOption);
                }
                return options;
            }

            generateQuestion(difficulty) {
                let category;
                const rand = Math.random();
                
                if (difficulty < 3) {
                    category = rand < 0.6 ? 'math' : 
                              rand < 0.8 ? 'history' : 'culture';
                } else if (difficulty < 7) {
                    category = rand < 0.4 ? 'math' : 
                              rand < 0.6 ? 'physics' : 
                              rand < 0.8 ? 'history' : 'culture';
                } else {
                    category = rand < 0.3 ? 'math' : 
                              rand < 0.5 ? 'physics' : 
                              rand < 0.7 ? 'chemistry' : 
                              rand < 0.9 ? 'history' : 'culture';
                }

                const question = this.categories[category](difficulty);
                
                if (this.usedQuestions.has(question.question)) {
                    return this.generateQuestion(difficulty);
                }
                
                this.usedQuestions.add(question.question);
                return question;
            }
        }

        // ===== GAME CONTROLLER =====
        class GameController {
            constructor() {
                this.engine = new QuizEngine();
                this.score = 0;
                this.questionCount = 1;
                this.timer = null;
                this.timeLeft = 30;
                this.isTimerRunning = false;

                this.elements = {
                    question: document.getElementById('question'),
                    options: document.getElementById('options'),
                    score: document.getElementById('score'),
                    feedback: document.getElementById('feedback'),
                    timerBar: document.getElementById('timer-bar'),
                    timerText: document.getElementById('timer-text'),
                    questionCount: document.getElementById('question-count')
                };

                this.startGame();
            }

            startGame() {
                this.updateTimerDisplay();
                this.loadQuestion();
            }

            loadQuestion() {
                // Clear existing timer
                if (this.isTimerRunning) {
                    clearInterval(this.timer);
                    this.isTimerRunning = false;
                }

                // Set timer duration based on question count
                this.timeLeft = this.questionCount <= 20 ? 30 : 10;
                this.elements.questionCount.textContent = this.questionCount;

                const question = this.engine.generateQuestion(this.score);
                this.currentQuestion = question;
                this.elements.question.innerHTML = question.question;
                this.elements.options.innerHTML = '';
                
                question.options.forEach(option => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = option;
                    btn.addEventListener('click', () => this.checkAnswer(option, question.answer));
                    this.elements.options.appendChild(btn);
                });

                this.startTimer();
            }

            startTimer() {
                this.isTimerRunning = true;
                this.updateTimerDisplay();
                
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    this.updateTimerDisplay();
                    
                    if (this.timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.isTimerRunning = false;
                        this.elements.feedback.textContent = "⏰ Time's up!";
                        this.elements.feedback.className = 'feedback incorrect';
                        this.score = Math.max(0, this.score - 1); // Penalty for timeout
                        this.elements.score.textContent = this.score;
                        setTimeout(() => this.nextQuestion(), 1500);
                    }
                }, 1000);
            }

            updateTimerDisplay() {
                const percentage = (this.timeLeft / (this.questionCount <= 20 ? 30 : 10)) * 100;
                this.elements.timerBar.style.width = `${percentage}%`;
                this.elements.timerText.textContent = `${this.timeLeft}s`;
                
                // Change color when time is running out
                if (this.timeLeft <= 5) {
                    this.elements.timerBar.style.background = '#e74c3c';
                } else {
                    this.elements.timerBar.style.background = '#f4d03f';
                }
            }

            checkAnswer(selected, correct) {
                clearInterval(this.timer);
                this.isTimerRunning = false;
                
                if (selected == correct) {
                    this.score++;
                    this.elements.score.textContent = this.score;
                    this.elements.feedback.textContent = '✓ Correct!';
                    this.elements.feedback.className = 'feedback correct';
                } else {
                    this.elements.feedback.textContent = `✗ Wrong! Correct answer: ${correct}`;
                    this.elements.feedback.className = 'feedback incorrect';
                    this.score = 0;
                    this.elements.score.textContent = '0';
                }
                
                this.nextQuestion();
            }

            nextQuestion() {
                this.questionCount++;
                setTimeout(() => this.loadQuestion(), this.questionCount <= 20 ? 800 : 500);
            }
        }

        // Start the game
        new GameController();
    </script>
</body>
</html>
